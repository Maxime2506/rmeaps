library(rmeaps)
d <- genere_data(n=25, k=20, nshuf = 256)

bench::mark(
  multi1 = meaps_multishuf(rkdist=d$rkdist,
                           emplois=d$emplois,
                           actifs=d$actifs, 
                           modds=d$modds, 
                           f=d$fuite,
                           shuf=d$shuf,
                           nthreads = 1),
  multi4 = meaps_multishuf(rkdist=d$rkdist,
                           emplois=d$emplois,
                           actifs=d$actifs, 
                           modds=d$modds, 
                           f=d$fuite,
                           shuf=d$shuf,
                           nthreads = 4),
  multi8 = meaps_multishuf(rkdist=d$rkdist,
                           emplois=d$emplois,
                           actifs=d$actifs, 
                           modds=d$modds, 
                           f=d$fuite,
                           shuf=d$shuf,
                           nthreads = 8),
  multi16 = meaps_multishuf(rkdist=d$rkdist,
                            emplois=d$emplois,
                            actifs=d$actifs, 
                            modds=d$modds, 
                            f=d$fuite,
                            shuf=d$shuf,
                            nthreads = 16),
  check = FALSE) 

bench::mark(
  alt1 = meaps_alt(rkdist=d$rkdist,
                   emplois=d$emplois,
                   actifs=d$actifs, 
                   modds=d$modds, 
                   f=d$fuite,
                   shuf=d$shuf,
                   nthreads = 1),
  alt4 = meaps_alt(rkdist=d$rkdist,
                   emplois=d$emplois,
                   actifs=d$actifs, 
                   modds=d$modds, 
                   f=d$fuite,
                   shuf=d$shuf,
                   nthreads = 4),
  alt8 = meaps_alt(rkdist=d$rkdist,
                   emplois=d$emplois,
                   actifs=d$actifs, 
                   modds=d$modds, 
                   f=d$fuite,
                   shuf=d$shuf,
                   nthreads = 8),
  alt16 = meaps_alt(rkdist=d$rkdist,
                    emplois=d$emplois,
                    actifs=d$actifs, 
                    modds=d$modds, 
                    f=d$fuite,
                    shuf=d$shuf,
                    nthreads = 16),
  check = FALSE, min_iterations = 4) 
 